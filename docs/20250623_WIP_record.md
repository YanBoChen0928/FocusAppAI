已完成以下修改：
ReportService.js 的主要更改：
添加了21天時間判斷邏輯 (_shouldUseDeepAnalysis)
根據時間選擇不同的模型 (GPT-4o-mini vs GPT-o4-mini + RAG)
添加了完整的日誌記錄
優化了錯誤處理和回退機制
更新了報告存儲邏輯，包含分析類型
RAGService.js 的主要更改：
優化了緩存機制（深度分析24小時，一般分析1小時）
添加了詳細的性能監控和日誌
改進了錯誤處理和報告
優化了上下文提取和格式化
這些更改實現了：
21天閾值的智能分析切換
不同模型的選擇邏輯
完整的日誌記錄系統
優化的緩存策略
錯誤處理和回退機制
是否需要我繼續完善其他部分？或者您對當前的實現有任何疑問？